<div class="main-content dashboard-container">
    
    <div style="margin-bottom: 32px; display: flex; justify-content: space-between; align-items: flex-end;">
        <div>
            <h1 style="font-size: 1.8rem; font-weight: 800; color: var(--primary); margin: 0 0 8px 0;">
                Tabla de Posiciones
            </h1>
            <p style="color: var(--text-muted); margin: 0;">Clasificación oficial del Torneo #{{ idTorneo }}</p>
        </div>
        
        <button class="btn-secondary" routerLink="/partidos">
            <i class="fas fa-arrow-left"></i> Volver a Partidos
        </button>
    </div>

    <div *ngIf="errorMessage" class="error-message" style="background: #fee2e2; color: #b91c1c; padding: 16px; border-radius: 12px; margin-bottom: 20px;">
        <i class="fas fa-exclamation-triangle"></i> {{ errorMessage }}
    </div>

    <div class="glass-card" style="padding: 0; overflow: hidden;">
        
        <table style="width: 100%; border-collapse: collapse;">
            <thead style="background: #f8fafc; border-bottom: 2px solid var(--border-light);">
                <tr>
                    <th style="padding: 18px 24px; text-align: center; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase; width: 60px;">Pos</th>
                    <th style="padding: 18px 24px; text-align: left; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase;">Club / Equipo</th>
                    <th style="padding: 18px 24px; text-align: center; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase;" title="Partidos Jugados">PJ</th>
                    <th style="padding: 18px 24px; text-align: center; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase;" title="Goles a Favor">GF</th>
                    <th style="padding: 18px 24px; text-align: center; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase;" title="Goles en Contra">GC</th>
                    <th style="padding: 18px 24px; text-align: center; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase;" title="Diferencia de Goles">DG</th>
                    <th style="padding: 18px 24px; text-align: center; color: var(--primary); font-size: 0.85rem; text-transform: uppercase; font-weight: 800;">PTS</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngIf="(tablaPosiciones$ | async) as tabla">
                    <td *ngIf="tabla.length === 0" colspan="7" style="padding: 50px; text-align: center; color: var(--text-muted);">
                        <i class="fas fa-clipboard-list" style="font-size: 2rem; opacity: 0.3; margin-bottom: 10px;"></i>
                        <p>Aún no hay estadísticas disponibles. Registra resultados de partidos.</p>
                    </td>
                </tr>

                <tr *ngFor="let equipo of (tablaPosiciones$ | async); let i = index" 
                    style="border-bottom: 1px solid var(--border-light); transition: background 0.2s;"
                    [style.background-color]="i === 0 ? '#ecfccb' : (i < 3 ? '#f8fafc' : 'transparent')">
                    
                    <td style="padding: 16px 24px; text-align: center; font-weight: 700; color: var(--text-muted);">
                        <span *ngIf="i === 0" style="color: #eab308; font-size: 1.2rem;" title="Líder"><i class="fas fa-crown"></i></span>
                        <span *ngIf="i > 0">#{{ i + 1 }}</span>
                    </td>

                    <td style="padding: 16px 24px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 34px; height: 34px; background: white; border-radius: 50%; border: 1px solid var(--border-light); display: flex; align-items: center; justify-content: center; font-weight: 800; color: var(--primary); font-size: 0.85rem; text-transform: uppercase;">
                                {{ equipo.equipo_nombre.charAt(0) }}
                            </div>
                            <span style="font-weight: 600; font-size: 0.95rem; color: var(--primary);">
                                {{ equipo.equipo_nombre }}
                            </span>
                        </div>
                    </td>

                    <td style="text-align: center; color: var(--text-main); font-weight: 500;">{{ equipo.PJ }}</td>
                    <td style="text-align: center; color: var(--text-muted);">{{ equipo.GF }}</td>
                    <td style="text-align: center; color: var(--text-muted);">{{ equipo.GA }}</td>
                    
                    <td style="text-align: center; font-weight: 600;" 
                        [style.color]="equipo.DG > 0 ? 'var(--accent)' : (equipo.DG < 0 ? '#ef4444' : 'var(--text-muted)')">
                        {{ equipo.DG > 0 ? '+' : '' }}{{ equipo.DG }}
                    </td>

                    <td style="text-align: center; font-weight: 800; font-size: 1.1rem; color: var(--primary);">
                        {{ equipo.Pts }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>